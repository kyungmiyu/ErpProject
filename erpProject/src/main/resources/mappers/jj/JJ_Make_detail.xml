<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.oracle.erpProject.JJ_Make_detailMapper">

<!-- ============================ JJ's mappers start ============================ -->
	<!-- 생산게시판 글의 총 갯수 파악하는 쿼리 -->
	<select id="jjcntMake" parameterType="JJ_Make_detail" resultType="int">
		SELECT Count(*)
		FROM Make_detail
	</select>

	<!-- 생산게시판 전체 게시글을 불러오는 쿼리 -->
	<select id="jjMakeList" parameterType="JJ_Make_detail" resultType="JJ_Make_detail">
		<![CDATA[
		SELECT *
		FROM (
			SELECT ROWNUM rn, w.*, p.p_name
			FROM (
				SELECT *
				FROM Make_detail
				ORDER BY md_num) w
			JOIN Product p ON w.p_itemcode = p.p_itemcode
		)
		WHERE rn >= #{start}
		AND rn <= #{end}
		]]>
	</select>
	
	<!-- 생산요청 페이지 시 값들을 불러오는 쿼리 -->
	<select id="jjRequestMakeList" resultType="JJ_Make_detail">
		SELECT	*
		FROM	Make_detail
	</select>
	
	
 	<insert id="jjMakeRequestInsert" parameterType="JJ_Make_detail">
		<selectKey keyProperty="m_num" resultType="int" order="BEFORE">
			SELECT NVL(MAX(m_num), 0) + 1
			FROM Make_detail
		</selectKey>
		
		INSERT INTO board ()
	</insert>
	


<!-- ============================ JJ's mappers 끝 ============================ -->

</mapper>